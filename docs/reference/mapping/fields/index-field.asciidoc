[[mapping-index-field]]
=== `_index` 字段

在跨多个索引执行查询时，有时需要添加与仅某些索引的文档关联的查询子句。`_index` 字段允许匹配索引文档的索引。它的值可以在 `term` 或 `terms` 查询、聚合、脚本和排序时访问：

注意： `_index` 作为虚拟字段公开——它不作为真实字段添加到 Lucene 索引中。
这意味着可以在 `term` 或 `terms` 查询中使用 `_index` 字段（或任何重写为 `term` 查询的查询，
例如 `match` 、 `query_string` 或 `simple_query_string` 查询），但它不支持 `prefix` 、 `wildcard` 、 `regexp` 或 `fuzzy` 查询。

[source,js]
--------------------------
# Example documents
PUT index_1/_doc/1
{
  "text": "Document in index 1"
}

PUT index_2/_doc/2?refresh=true
{
  "text": "Document in index 2"
}

GET index_1,index_2/_search
{
  "query": {
    "terms": {
      "_index": ["index_1", "index_2"] <1>
    }
  },
  "aggs": {
    "indices": {
      "terms": {
        "field": "_index", <2>
        "size": 10
      }
    }
  },
  "sort": [
    {
      "_index": { <3>
        "order": "asc"
      }
    }
  ],
  "script_fields": {
    "index_name": {
      "script": {
        "lang": "painless",
        "source": "doc['_index']" <4>
      }
    }
  }
}
--------------------------
// CONSOLE

<1> 在 `_index` 字段上查询。
<2> 在 `_index` 字段上聚合。
<3> 在 `_index` 字段上排序。
<4> 在脚本中访问 `_index` 字段。
