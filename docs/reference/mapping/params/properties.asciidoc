[[properties]]
=== `properties` 

类型映射，<<object,`object` 字段>>和 <<nested,`nested` 字段>>（包括子字段），称为 `properties` 。
这些属性可以是任何 <<mapping-types,datatype>>，包括 `object` 和 `nested` 。属性可以通过以下方式添加：

* 通过在<<indices-create-index,创建索引>>时定义。
* explicitly by defining them when adding or updating a mapping type with the <<indices-put-mapping,PUT mapping>> API.
* 通过使用 <<indices-put-mapping,PUT mapping>> API 添加或更新映射类型时显式定义。
* <<dynamic-mapping,动态地添加>>，但只在通过索引包含新字段的文档时。

下面是一个将 `properties` 添加到映射类型, `object` 字段和 `nested` 字段的示例：

[source,js]
--------------------------------------------------
PUT my_index
{
  "mappings": {
    "_doc": { <1>
      "properties": {
        "manager": { <2>
          "properties": {
            "age":  { "type": "integer" },
            "name": { "type": "text"  }
          }
        },
        "employees": { <3>
          "type": "nested",
          "properties": {
            "age":  { "type": "integer" },
            "name": { "type": "text"  }
          }
        }
      }
    }
  }
}

PUT my_index/_doc/1 <4>
{
  "region": "US",
  "manager": {
    "name": "Alice White",
    "age": 30
  },
  "employees": [
    {
      "name": "John Smith",
      "age": 34
    },
    {
      "name": "Peter Brown",
      "age": 26
    }
  ]
}
--------------------------------------------------
// CONSOLE
<1> `_doc` 映射类型下的 Properties。
<2> `manager` 对象字段下的 Properties。
<3> `employees` nested 字段下的 Properties。
<4> 对应于上述映射的示例文档。

TIP: 允许 `properties` 设置对同一索引中同名字段的设置不同。可以使用 <<indices-put-mapping,PUT mapping API>> 将新属性添加到现有字段。

==== 点符号（Dot notation）

可以在查询、聚合等中引用内部字段，通过 __点符号__ ：

[source,js]
--------------------------------------------------
GET my_index/_search
{
  "query": {
    "match": {
      "manager.name": "Alice White" 
    }
  },
  "aggs": {
    "Employees": {
      "nested": {
        "path": "employees"
      },
      "aggs": {
        "Employee Ages": {
          "histogram": {
            "field": "employees.age", 
            "interval": 5
          }
        }
      }
    }
  }
}
--------------------------------------------------
// CONSOLE
// TEST[continued]

IMPORTANT: 必须指定内部字段的完整路径。
