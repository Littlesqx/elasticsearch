[[similarity]]
=== `similarity`

Elasticsearch 允许为每个字段配置评分算法或 __相似性（similarity）__ 。`similarity` 设置提供了一种简单方法选择除默认 `BM25` 之外的相似性算法的，例如 `TF/IDF` 。

相似性主要用于 <<text,`text`>> 字段，但也可以应用于其他字段类型。

可以通过调整内置相似性的参数来配置自定义相似性。有关此专业选项的更多详细信息，请参阅 <<index-modules-similarity,similarity 模块>>。

相似性的配置是开箱即用的，也十分简单：

`BM25`::
        Okapi BM25 算法。它是 Elasticsearch 和 Lucene 默认使用的算法。参阅 {defguide}/pluggable-similarites.html[Pluggable Similarity Algorithms] 以查看更多信息。

`classic`::
        TF/IDF 算法曾经是 Elasticsearch 和 Lucene 默认使用的算法。参阅 {defguide}/practical-scoring-function.html[Lucene’s Practical Scoring Function] 以查看更多信息。

`boolean`::
        一个简单的布尔相似性，在不需要全文排名时使用，分数应仅基于词项（term）查询是否匹配。布尔相似度为词项(term)提供与其查询提升相等的分数。


首次创建字段时，可以在字段级别设置 `similarity` ，如下所示：

[source,js]
--------------------------------------------------
PUT my_index
{
  "mappings": {
    "_doc": {
      "properties": {
        "default_field": { <1>
          "type": "text"
        },
        "boolean_sim_field": {
          "type": "text",
          "similarity": "boolean" <2>
        }
      }
    }
  }
}
--------------------------------------------------
// CONSOLE
<1> `default_field` 使用 `BM25` 相似性算法。
<2> `boolean_sim_field` 使用 `boolean` 相似性算法。
